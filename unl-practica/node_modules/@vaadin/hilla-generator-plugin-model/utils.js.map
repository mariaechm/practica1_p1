{"version":3,"file":"utils.js","sourceRoot":"","sources":["src/utils.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,EAAE,EAAkF,MAAM,YAAY,CAAC;AAMhH,MAAM,CAAC,MAAM,gBAAgB,GAAG,kBAAkB,CAAC;AAEnD,MAAM,UAAU,sBAAsB,CAAC,SAAiB,EAAE,EAAE,OAAO,EAAE,KAAK,EAAqB;IAC7F,MAAM,SAAS,GAAG,KAAK,CAAC,oBAAoB,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAC;IAC9E,OAAO,OAAO,CAAC,KAAK,CAAC,aAAa,CAAC,SAAS,EAAE,SAAS,CAAC,IAAI,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;AACtG,CAAC;AAED,MAAM,UAAU,2BAA2B,CAAC,IAAgB,EAAE,IAA2B;IACvF,MAAM,QAAQ,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAC;IAE7F,OAAO,EAAE,CAAC,OAAO,CAAC,mBAAmB,CACnC,SAAS,EACT,SAAS,EACT,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,0BAA0B,CAAC,SAAS,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC,EACvF,SAAS,EACT,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,CAAC,sBAAsB,CAAC,EAC5D,EAAE,CAAC,OAAO,CAAC,mBAAmB,CAAC,IAAI,EAAE,SAAS,EAAE,CAAC,GAAG,QAAQ,EAAE,GAAG,IAAI,CAAC,CAAC,CACxE,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,qBAAqB,CAAC,KAAiB,EAAE,KAAiB;IACxE,OAAO,EAAE,CAAC,OAAO,CAAC,yBAAyB,CACzC,CAAC,EAAE,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,UAAU,CAAC,aAAa,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,EAClH,kBAAkB,EAClB,SAAS,EACT,SAAS,EACT,EAAE,CAAC,OAAO,CAAC,oBAAoB,CAAC,KAAK,EAAE,SAAS,EAAE,CAAC,KAAK,CAAC,CAAC,CAC3D,CAAC;AACJ,CAAC","sourcesContent":["import type Plugin from '@vaadin/hilla-generator-core/Plugin.js';\nimport type DependencyManager from '@vaadin/hilla-generator-utils/dependencies/DependencyManager.js';\nimport ts, { type ArrowFunction, type Expression, type Identifier, type PropertyDeclaration } from 'typescript';\n\nexport type Context = Readonly<{\n  owner: Plugin;\n}>;\n\nexport const defaultMediaType = 'application/json';\n\nexport function importBuiltInFormModel(specifier: string, { imports, paths }: DependencyManager): Identifier {\n  const modelPath = paths.createBareModulePath('@vaadin/hilla-lit-form', false);\n  return imports.named.getIdentifier(modelPath, specifier) ?? imports.named.add(modelPath, specifier);\n}\n\nexport function createModelBuildingCallback(name: Identifier, args: readonly Expression[]): ArrowFunction {\n  const defaults = [ts.factory.createIdentifier('parent'), ts.factory.createIdentifier('key')];\n\n  return ts.factory.createArrowFunction(\n    undefined,\n    undefined,\n    defaults.map((arg) => ts.factory.createParameterDeclaration(undefined, undefined, arg)),\n    undefined,\n    ts.factory.createToken(ts.SyntaxKind.EqualsGreaterThanToken),\n    ts.factory.createNewExpression(name, undefined, [...defaults, ...args]),\n  );\n}\n\nexport function createEmptyValueMaker(maker: Identifier, model: Identifier): PropertyDeclaration {\n  return ts.factory.createPropertyDeclaration(\n    [ts.factory.createModifier(ts.SyntaxKind.StaticKeyword), ts.factory.createModifier(ts.SyntaxKind.OverrideKeyword)],\n    'createEmptyValue',\n    undefined,\n    undefined,\n    ts.factory.createCallExpression(maker, undefined, [model]),\n  );\n}\n"]}