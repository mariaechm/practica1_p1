{"mappings":"AAAA,OAAO,oDAAqD;AAE5D,OAAO,kBAAkB,yEAA0E;AACnG,OAAO,+DAAgE;AAEvE,OAAO,2CAA4C;AAEnD,eAAe,MAAM,qBAAqB,OAAO;CAC/C,IAAa,OAAe;AAC1B,SAAO,OAAO,KAAK;CACpB;CAGD,MAAe,QAAQ,EAAE,eAAe,SAAwB,EAAiB;EAC/E,MAAM,OAAO,cAAc,IAAI,eAAe,0BAA0B;AAExE,OAAK,MAAM;AACT,SAAM,IAAI,aAAa,EAAE,eAAe,KAAK,wBAAwB,KAAK,YAAY;EACvF;EAED,MAAM,YAAY,QAAQ,OAAO,CAAC,SAAS,KAAK,IAAI,KAAK,KAAK,yBAAyB,SAAS;EAChG,MAAM,aAAa,IAAI,gBAAgB,WAAW,MAAM,SAAS;AACjE,UAAQ,KAAK,WAAW;CACzB;AACF","names":[],"sources":["/opt/agent/work/1af72d8adc613024/hilla/packages/ts/generator-plugin-barrel/src/index.ts"],"sourcesContent":["import Plugin from '@vaadin/hilla-generator-core/Plugin.js';\nimport type { SharedStorage } from '@vaadin/hilla-generator-core/SharedStorage.js';\nimport BackbonePlugin, { BackbonePluginSourceType } from '@vaadin/hilla-generator-plugin-backbone';\nimport PluginError from '@vaadin/hilla-generator-utils/PluginError.js';\nimport type { SourceFile } from 'typescript';\nimport BarrelProcessor from './BarrelProcessor.js';\n\nexport default class BarrelPlugin extends Plugin {\n  override get path(): string {\n    return import.meta.url;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/require-await\n  override async execute({ pluginStorage, sources }: SharedStorage): Promise<void> {\n    const tags = pluginStorage.get(BackbonePlugin.BACKBONE_PLUGIN_FILE_TAGS) as WeakMap<SourceFile, string> | undefined;\n\n    if (!tags) {\n      throw new PluginError(`${BackbonePlugin.name} should be run first.`, this.constructor.name);\n    }\n\n    const endpoints = sources.filter((file) => tags.get(file) === BackbonePluginSourceType.Endpoint);\n    const barrelFile = new BarrelProcessor(endpoints, this).process();\n    sources.push(barrelFile);\n  }\n}\n"],"version":3}