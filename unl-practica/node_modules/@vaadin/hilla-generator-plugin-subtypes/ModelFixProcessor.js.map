{"mappings":"AAAA,OAAO,yEAA0E;AACjF,OAAO,oBAA0C;AACjD,SAAS,wCAAyC;AAElD,OAAO,MAAM,kBAAkB;CAC7B,AAASA;CAET,YAAYC,QAAoB;AAC9B,OAAKD,UAAU;CAChB;CAED,UAAsB;EACpB,MAAM,aAAa,KAAKA,QAAQ,WAAW,IAAI,CAAC,cAAc;AAE5D,OAAI,GAAG,mBAAmB,UAAU,EAAE;IACpC,MAAM,UAAU,UAAU,QAAQ,OAChC,CAAC,aAAa,GAAG,cAAc,OAAO,IAAI,qBAAqB,OAAO,KAAK,KAAK,SACjF;AAED,WAAO,GAAG,QAAQ,uBAChB,UAAU,WACV,UAAU,MACV,UAAU,gBACV,UAAU,iBACV,QACD;GACF;AAED,UAAO;EACR,EAAC;AAEF,SAAO,iBAAiB,YAAY,KAAKA,QAAQ,SAAS;CAC3D;AACF","names":["#source","source: SourceFile"],"sources":["/opt/agent/work/1af72d8adc613024/hilla/packages/ts/generator-plugin-subtypes/src/ModelFixProcessor.ts"],"sourcesContent":["import createSourceFile from '@vaadin/hilla-generator-utils/createSourceFile.js';\nimport ts, { type SourceFile } from 'typescript';\nimport { propertyNameToString } from './utils.js';\n\nexport class ModelFixProcessor {\n  readonly #source: SourceFile;\n\n  constructor(source: SourceFile) {\n    this.#source = source;\n  }\n\n  process(): SourceFile {\n    const statements = this.#source.statements.map((statement) => {\n      // filter out the @type property from all models\n      if (ts.isClassDeclaration(statement)) {\n        const members = statement.members.filter(\n          (member) => !(ts.isGetAccessor(member) && propertyNameToString(member.name) === '@type'),\n        );\n\n        return ts.factory.createClassDeclaration(\n          statement.modifiers,\n          statement.name,\n          statement.typeParameters,\n          statement.heritageClauses,\n          members,\n        );\n      }\n\n      return statement;\n    });\n\n    return createSourceFile(statements, this.#source.fileName);\n  }\n}\n"],"version":3}